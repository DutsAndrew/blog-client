(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2405:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var n=s(9268),a=s(6642),o=s.n(a),r=s(8066),c=s.n(r),i=s(7576);let m=e=>{let{cmsController:t}=e,s=()=>{t()};return(0,n.jsxs)("nav",{className:o().navContainer,children:[(0,n.jsxs)("div",{className:o().headerLeftContainer,children:[(0,n.jsx)(c(),{path:i.aZL,title:"Logo",size:2,rotate:40,color:"#FFA500",spin:25}),(0,n.jsxs)("div",{className:o().searchContainer,children:[(0,n.jsx)("input",{className:o().searchBar,type:"text",placeholder:"Search..."}),(0,n.jsx)("img",{className:o().searchIcon,src:"/magnify.svg"})]})]}),(0,n.jsxs)("div",{className:o().headerRightContainer,children:[(0,n.jsx)("button",{className:o().createPostButton,onClick:()=>s(),children:"Create Post"}),(0,n.jsx)("img",{className:o().accountImg,src:"/shield-account.svg",onClick:()=>s()})]})]})};var l=s(6006);let p=e=>{let{currentSort:t,setSort:s}=e;(0,l.useEffect)(()=>{r(t)},[t]);let a=e=>{s(e)},r=e=>{let t=document.querySelector(".active-sort");if(t&&t.classList.remove("active-sort"),"new"===e){let e=document.querySelector("#sort-new");null==e||e.classList.add("active-sort")}else if("hot"===e){let e=document.querySelector("#sort-hot");null==e||e.classList.add("active-sort")}else if("top"===e){let e=document.querySelector("#sort-top");null==e||e.classList.add("active-sort")}};return(0,n.jsxs)("nav",{className:o().sortOptions,children:[(0,n.jsx)("p",{className:o().sortOption,id:"sort-new",onClick:()=>a("new"),children:"New"}),(0,n.jsx)("p",{className:o().sortOption,id:"sort-top",onClick:()=>a("top"),children:"Top"}),(0,n.jsx)("p",{className:o().sortOption,id:"sort-hot",onClick:()=>a("hot"),children:"Hot"})]})};var d=s(8404),_=s(1517),h=s.n(_);let u=e=>{let{postId:t,refreshCommentList:s}=e,a=e=>{e.preventDefault();let t=document.querySelector("#comment"),s=document.querySelector("#name");if(t&&s){let e=t.value,n=s.value;if(0!==e.length&&0!==n.length){let t=r(e,n);c(t)}else alert("You can only add a comment if you have a comment and name present in your submission")}},r=(e,t)=>{let s=new(h()),n=s.clean(e).trim(),a=s.clean(t).trim();return[n,a]},c=async e=>{let n=sessionStorage.getItem("user");if(n){let n=e[0],a=e[1],o=new URLSearchParams;o.append("comment",n),o.append("name",a);let r=await fetch("http://localhost:8080/api/post/".concat(t,"/comment/create"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:o.toString()}),c=await r.json();c.comment?(alert("".concat(c.message,", ").concat(c.comment.comment)),s(c.comment)):alert("".concat(c.message))}else alert("You are currently browsing without a token, please exit private/incognito browsing to add a comment")};return(0,n.jsxs)("form",{className:o().addCommentForm,onSubmit:e=>a(e),children:[(0,n.jsxs)("div",{className:o().formGroup,children:[(0,n.jsx)("h2",{className:o().addComentHeaderText,children:"Add a Comment"}),(0,n.jsx)("label",{htmlFor:"comment",children:"*Comment:"}),(0,n.jsx)("textarea",{className:o().formInput,name:"comment",id:"comment",rows:4})]}),(0,n.jsxs)("div",{className:o().formGroup,children:[(0,n.jsx)("label",{htmlFor:"name",children:"*Name:"}),(0,n.jsx)("input",{className:o().formInput,type:"text",name:"name",id:"name"})]}),(0,n.jsx)("button",{className:o().submitBtn,type:"submit",children:"Add Comment"})]})},x=e=>{let{postId:t}=e,[s,a]=(0,l.useState)({message:""});(0,l.useEffect)(()=>{r()},[]);let r=async()=>{let e=await fetch("http://localhost:8080/api/post/".concat(t,"/comments"),{method:"GET",headers:{Accept:"application/json"}}),s=await e.json();s.comments?a({message:s.message,comments:s.comments}):a({message:s.message})},c=e=>{a({message:s.message,comments:[...s.comments,e]})};return s.comments?(0,n.jsxs)("div",{className:o().commentsContainer,children:[(0,n.jsx)(u,{postId:t,refreshCommentList:c}),(0,n.jsx)("h1",{className:o().commentsHeaderText,children:"Comments"}),(0,n.jsx)("div",{className:o().commentListContainer,children:s.comments.map(e=>(0,n.jsxs)("div",{className:o().commentContainer,children:[(0,n.jsx)("p",{className:o().commentData,children:(0,n.jsxs)("strong",{children:[e.author," \xa0",e.timestamp.split("T")[0]," @ ",e.timestamp.split("T")[1].split(".")[0]]})}),(0,n.jsx)("div",{className:o().commentTextContainer,children:(0,n.jsx)("p",{className:o().commentText,children:e.comment})}),(0,n.jsxs)("div",{className:o().commentLikesContainer,children:[(0,n.jsx)("img",{src:"/heart.svg",className:o().commentLikesImg}),(0,n.jsxs)("p",{className:o().commentLikesText,children:[e.likes," Likes"]})]})]},e._id))})]}):(0,n.jsx)("div",{className:o().commentsContainer,children:(0,n.jsx)(u,{postId:t,refreshCommentList:c})})},g=e=>{let{post:t,returnToPosts:s}=e;return console.log(t),(0,n.jsxs)("section",{className:o().postViewContainer,children:[(0,n.jsx)("button",{className:o().returnBtn,onClick:()=>s(),children:"Return to Feed"}),(0,n.jsxs)("div",{className:o().postInformationText,children:[(0,n.jsxs)("p",{className:o().commentData,children:[(0,n.jsx)("strong",{children:"Written By: \xa0"}),"object"==typeof t.author?"".concat(t.author.firstName," ").concat(t.author.lastName):t.author,(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"On: \xa0"}),t.timestamp.split("T")[0]," @ ",t.timestamp.split("T")[1].split(".")[0]]}),(0,n.jsx)("p",{className:o().viewingPostTitleText,children:(0,n.jsx)("strong",{children:t.title})}),(0,n.jsx)("div",{className:o().postBodyText,children:(0,d.ZP)(t.body)})]}),(0,n.jsxs)("div",{className:o().reactionContainer,children:[(0,n.jsx)("img",{src:"/heart.svg",className:o().likesHeartImg}),(0,n.jsxs)("p",{className:o().likesText,children:[t.likes," Likes"]})]}),(0,n.jsx)(x,{postId:t._id})]})},j=e=>{let{changeView:t,posts:s}=e;return(0,n.jsx)("section",{className:o().postsContainer,children:s.map(e=>(0,n.jsx)("div",{className:o().postContainer,onClick:()=>{t(e)},children:(0,n.jsxs)("div",{className:o().postsInfoContainer,children:[(0,n.jsx)("p",{className:o().postsTitleText,children:(0,n.jsx)("strong",{children:e.title.length<50?e.title:e.title.slice(0,50)+"..."})}),(0,n.jsx)("div",{className:o().postsBodyText,children:(0,d.ZP)(e.body.length<500?e.body:e.body.slice(0,500)+"...")})]})},e._id))})},C=e=>{let{currentSort:t}=e,[s,a]=(0,l.useState)({message:""}),[r,c]=(0,l.useState)({current:"posts"});(0,l.useEffect)(()=>{!async function(){let e=await fetch("http://localhost:8080/api/posts/".concat(t),{headers:{Accept:"application/json"},method:"GET"}),s=await e.json();400===s.status&&a({message:"No posts found"}),s.posts?a({message:s.message,posts:s.posts}):a({message:s.message})}()},[t]);let i=e=>{c({current:"post",post:e})},m=()=>{c({current:"posts"})};return s.posts?"posts"===r.current?(0,n.jsx)(j,{changeView:i,posts:s.posts}):"post"===r.current&&r.post?(0,n.jsx)(g,{post:r.post,returnToPosts:m}):(0,n.jsx)("p",{children:"Oops, something went terribly wrong :/"}):(0,n.jsx)("section",{className:o().postsContainer,children:(0,n.jsx)("p",{children:s.message})})},f=()=>{let[e,t]=(0,l.useState)({current:"new"}),s=e=>{t({current:e})};return(0,n.jsxs)("section",{className:o().feedContainer,children:[(0,n.jsx)(p,{currentSort:e.current,setSort:s}),(0,n.jsx)(C,{currentSort:e.current})]})},N=()=>{let[e,t]=(0,l.useState)({message:""});(0,l.useEffect)(()=>{s()},[]);let s=async()=>{let e=await fetch("http://localhost:8080/api/announcements",{method:"GET",headers:{Accept:"application/json"}}),s=await e.json();s.announcements?t({message:s.message,announcements:s.announcements}):t({message:s.message})};return e.announcements?(0,n.jsxs)("section",{className:o().sidebarContainer,children:[(0,n.jsx)("h2",{className:o().sideBarHeaderText,children:"Announcements"}),(0,n.jsx)("div",{className:o().announcementsContainer,children:e.announcements.map(e=>(0,n.jsx)("div",{className:o().announcementText,children:(0,d.ZP)(e.announcement)}))})]}):(0,n.jsx)("section",{className:o().sidebarContainer,children:(0,n.jsx)("h2",{className:o().sideBarHeaderText,children:"Announcements"})})};var T=s(6796),v=s.n(T);let w=()=>{(0,l.useEffect)(()=>{e()},[]);let e=()=>{sessionStorage.getItem("user")||sessionStorage.setItem("user",v()())},t=()=>{window.open("","_blank")};return(0,n.jsxs)("main",{className:o().main,children:[(0,n.jsx)(m,{cmsController:t}),(0,n.jsxs)("div",{className:o().contentContainer,children:[(0,n.jsx)(N,{}),(0,n.jsx)(f,{})]})]})};var I=w},1411:function(e,t,s){Promise.resolve().then(s.bind(s,2405))},6642:function(e){e.exports={main:"page_main__WunS6",contentContainer:"page_contentContainer__VTCsm",sidebarContainer:"page_sidebarContainer__1CWM9",sideBarHeaderText:"page_sideBarHeaderText__o8g7K",announcementsContainer:"page_announcementsContainer__cku1I",announcementText:"page_announcementText__mf_GB",feedContainer:"page_feedContainer__oRphl",sortOptions:"page_sortOptions__aw_lv",sortOption:"page_sortOption__az6EZ",navContainer:"page_navContainer__cpHsX",headerLeftContainer:"page_headerLeftContainer__1wpGP",headerRightContainer:"page_headerRightContainer__ldt2r",logoImg:"page_logoImg__22W0o",searchContainer:"page_searchContainer__BRhuy",searchBar:"page_searchBar__YMXTS",searchIcon:"page_searchIcon__kL38z",accountImg:"page_accountImg__WS1hZ",createPostButton:"page_createPostButton__w61dH",postsContainer:"page_postsContainer__sRRTO",postContainer:"page_postContainer__LXXGA",postInfoContainer:"page_postInfoContainer__XErG2",reactionContainer:"page_reactionContainer__fWXkc",likesHeartImg:"page_likesHeartImg__7fNfA",likesText:"page_likesText__X21Uq",postViewContainer:"page_postViewContainer__U66Ja",postsTitleText:"page_postsTitleText__X4l_w",postsInfoContainer:"page_postsInfoContainer__RBU_R",returnBtn:"page_returnBtn__yxF5B",viewingPostTitleText:"page_viewingPostTitleText__GxmRb",postBodyText:"page_postBodyText__2IOOc",postInformationText:"page_postInformationText__Odh99",commentsContainer:"page_commentsContainer__iht7Y",commentsHeaderText:"page_commentsHeaderText__InT_z",addCommentForm:"page_addCommentForm__KH6RU",formGroup:"page_formGroup__brmhi",formInput:"page_formInput__retUh",commentListContainer:"page_commentListContainer__BnyUN",commentContainer:"page_commentContainer__4eblz",commentLikesImg:"page_commentLikesImg___O3bW",commentLikesContainer:"page_commentLikesContainer__ZxBUF",submitBtn:"page_submitBtn__2aLSZ"}}},function(e){e.O(0,[632,549,667,961,744],function(){return e(e.s=1411)}),_N_E=e.O()}]);